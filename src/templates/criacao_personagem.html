<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Criação de Personagem</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles/criacao_personagem.css') }}">
        <link rel="shortcut icon" href="{{ url_for('static', filename='images/criacao-personagem-icon.ico') }}" type="image/x-icon">
    </head>
    <body>
        <header>
            <h1>Criação de Personagem</h1>
            <hr>
        </header>
        <main>
            <form method="POST">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required {% if bloquear_campos %}disabled{% endif %}>

                <label for="estilo">Estilo:</label>
                <select name="estilo" id="estilo" {% if bloquear_campos %}disabled{% endif %}>
                    <option value="selecione">Selecione</option>
                    <option value="classico" {% if estilo == 'classico' %}selected{% endif %}>Clássico</option>
                    <option value="aventureiro" {% if estilo == 'aventureiro' %}selected{% endif %}>Aventureiro</option>
                    <option value="heroico" {% if estilo == 'heroico' %}selected{% endif %}>Heroico</option>
                </select>

                <label for="raca">Raça:</label>
                <select name="raca" id="raca" {% if bloquear_campos %}disabled{% endif %}>
                    <option value="selecione">Selecione</option>
                    <option value="humano">Humano</option>
                    <option value="elfo">Elfo</option>
                    <option value="meio-elfo">Meio-Elfo</option>
                    <option value="anao">Anão</option>
                    <option value="gnomo">Gnomo</option>
                    <option value="halfling">Halfling</option>
                </select>

                <label for="classe">Classe:</label>
                <select name="classe" id="classe" {% if bloquear_campos %}disabled{% endif %}>
                    <option value="selecione">Selecione</option>
                    <option value="guerreiro">Guerreiro</option>
                    <option value="paladino">Paladino</option>
                    <option value="barbaro">Barbaro</option>
                    <option value="clerigo">Clérigo</option>
                    <option value="clerigo">Ranger</option>
                </select><br><br>

                {% if valores_rolados %}
                <div class="valores-rolados">
                    <h3>Valores Disponíveis:</h3>
                    <div style="display: flex; gap: 10px;">
                    {% if valores_rolados is mapping %}
                        {% for atributo, valor in valores_rolados.items() %}
                        <span class="valor">{{ valor }}</span>
                        {% endfor %}
                    {% else %}
                        {% for valor in valores_rolados %}
                        <span class="valor">{{ valor }}</span>
                        {% endfor %}
                    {% endif %}
                    </div>
                </div>
                {% endif %}

                {% if estilo == 'classico' and valores_rolados and valores_rolados is mapping %}
                <fieldset>
                <legend>Atributos</legend>
                {% for atributo, valor in valores_rolados.items() %}
                    <label for="{{ atributo }}">{{ atributo|capitalize }}:</label>
                    <input type="text" name="{{ atributo }}" id="{{ atributo }}" value="{{ valor }}" readonly>
                    <input type="hidden" name="{{ atributo }}" value="{{ valor }}">
                    <br>
                {% endfor %}
                </fieldset><br><br>
                {% endif %}

                {% if bloquear_campos and valores_rolados and estilo != 'classico' %}
                <fieldset>
                <legend>Atributos</legend>
                {% set atributos = ['forca', 'destreza', 'constituicao', 'inteligencia', 'sabedoria', 'carisma'] %}
                {% for atributo in atributos %}
                <label for="{{ atributo }}">{{ atributo|capitalize }}:</label>
                <select name="{{ atributo }}" id="{{ atributo }}" class="atributo-select">
                    <option value="selecione">Selecione</option>
                    {% for valor in valores_rolados %}
                    <option value="{{ valor }}">{{ valor }}</option>
                    {% endfor %}
                </select><br>
                {% endfor %}
                </fieldset><br><br>
                {% endif %}

                <button type="submit">Criar Personagem</button>
            </form>
        </main>
        <script id="valores-json" type="application/json">
            {{ valores_rolados | tojson }}
        </script>
        <script src="{{ url_for('static', filename='scripts/Atributos.js') }}"></script>
    </body>
</html>